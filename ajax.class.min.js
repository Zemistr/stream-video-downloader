/*
 Zemistr 2013
 @licence   CC-BY-SA, http://creativecommons.org/licenses/by-sa/3.0/deed.cs
*/
var Ajax=function(e,g){function k(a,b){return"function"==typeof a?a(b):function(){}}function m(a){var b;a=a||{};for(b in h)a[b]=a[b]||h[b];return a}var h={url:g.location,method:"GET",data:{},timeout:0,onloading:function(){},onsuccess:function(){},onerror:function(){},ontimeout:function(){}},n=function(){var a={s:[],add:function(b,a){this.s[this.s.length]=encodeURIComponent(b)+"="+encodeURIComponent(null==a?"":a)},build:function(b){var a;this.s=[];if(""+b===b)return b;for(a in b)b.hasOwnProperty(a)&&
this.buildParams(a,b[a]);return this.s.join("&").replace(/%20/g,"+")},buildParams:function(a,f){var d;if("[object Array]"===Object.prototype.toString.call(f))for(d=0;d<f.length;d+=1){var e=f[d];/\]\[$/.test(a)?this.add(a,e):this.buildParams(a+"["+("object"===typeof e?d:"")+"]",e)}else if("object"===typeof f)for(d in f)f.hasOwnProperty(d)&&this.buildParams(a+"["+d+"]",f[d]);else this.add(a,f)}};return function(b){return a.build(b)}}();return function(a){var b,f,d,h,c,g,l;a=m(a);f=a.method.toUpperCase();
d=n(a.data);h=a.url;"POST"!==f&&(h+=""!=d?"?"+d:"",d="");c=e.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;c.aborted=!1;c.open(f,h,!0);c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.setRequestHeader("Cache-Control","no-cache");c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.send(d);0<a.timeout&&(b=setTimeout(function(){c.abort();c.aborted=!0;k(a.ontimeout)},a.timeout));c.onreadystatechange=function(){b&&clearTimeout(b);g=Number(c.readyState);
l=Number(c.status);c.aborted||(401<=l&&404>=l&&(c.aborted=!0,k(a.onerror,l)),1<=g&&4>=g&&k(a.onloading,g),4!=g||200!=l&&304!=l||k(a.onsuccess,c.responseText))};return{xhr:function(){return c},abort:function(){c.abort();c.aborted=!0;return c}}}}(window,document);Ajax.parseJSON=function(e){return JSON&&JSON.parse?JSON.parse(e):(new Function("return "+e+";"))()};Ajax.post=function(e,g,k,m,h,n){return Ajax({url:e,method:"POST",data:g,onloading:m,onsuccess:k,onerror:h,ontimeout:n})};
Ajax.get=function(e,g,k,m,h,n){return Ajax({url:e,data:g,onloading:m,onsuccess:k,onerror:h,ontimeout:n})};
