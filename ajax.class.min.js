/*
 Zemistr 2013
 @licence   CC-BY-SA, http://creativecommons.org/licenses/by-sa/3.0/deed.cs
*/
var Ajax=function(e,l){function f(a,b){return"function"==typeof a?a(b):function(){}}function m(a){var b;a=a||{};for(b in g)a[b]=a[b]||g[b];return a}var g={url:l.location,method:"GET",data:{},timeout:0,onloading:function(){},onsuccess:function(){},onerror:function(){},ontimeout:function(){}},n=function(){var a={s:[],add:function(b,a){this.s[this.s.length]=encodeURIComponent(b)+"="+encodeURIComponent(null==a?"":a)},build:function(b){var a;this.s=[];if(""+b===b)return b;for(a in b)b.hasOwnProperty(a)&&
this.buildParams(a,b[a]);return this.s.join("&").replace(/%20/g,"+")},buildParams:function(a,h){var d;if("[object Array]"===Object.prototype.toString.call(h))for(d=0;d<h.length;d+=1){var f=h[d];/\]\[$/.test(a)?this.add(a,f):this.buildParams(a+"["+("object"===typeof f?d:"")+"]",f)}else if("object"===typeof h)for(d in h)h.hasOwnProperty(d)&&this.buildParams(a+"["+d+"]",h[d]);else this.add(a,h)}};return function(b){return a.build(b)}}();return function(a){var b,h,d,e,c,g,k;a=m(a);h=a.method.toUpperCase();
d=n(a.data);e=a.url;"POST"!==h&&(e+=""!=d?"?"+d:"",d="");c=new XMLHttpRequest;c.aborted=!1;c.open(h,e,!0);c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.setRequestHeader("Cache-Control","no-cache");c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.send(d);0<a.timeout&&(b=setTimeout(function(){c.abort();c.aborted=!0;f(a.ontimeout)},a.timeout));c.onreadystatechange=function(){b&&clearTimeout(b);g=Number(c.readyState);k=Number(c.status);c.aborted||(401<=k&&404>=k&&(c.aborted=
!0,f(a.onerror,k)),1<=g&&4>=g&&f(a.onloading,g),4!=g||200!=k&&304!=k||f(a.onsuccess,c.responseText))};return{xhr:function(){return c},abort:function(){c.abort();c.aborted=!0;return c}}}}(window,document);Ajax.parseJSON=function(e){return JSON&&JSON.parse?JSON.parse(e):(new Function("return "+e+";"))()};Ajax.post=function(e,l,f,m,g,n){return Ajax({url:e,method:"POST",data:l,onloading:m,onsuccess:f,onerror:g,ontimeout:n})};
Ajax.get=function(e,l,f,m,g,n){return Ajax({url:e,data:l,onloading:m,onsuccess:f,onerror:g,ontimeout:n})};
